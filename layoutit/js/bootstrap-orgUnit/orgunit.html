<!DOCTYPE html>
<html>
<head>

    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="../../js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../js/angular.min.js"></script>
    <script type="text/javascript" src="bootstrap-orgUnit.js"></script>


</head>
<body ng-app="app" ng-controller="appctr">

<div class="input-group btn-group-sm" >

    <input type="hidden" class="form-control input-sm" ng-model="ids"/>
    <input type="text" class="form-control input-sm" ng-model="names"/>
    <a class="input-group-addon btn btn-sm dropdown-toggle" data-toggle="dropdown"> <i class="glyphicon glyphicon-user" onclick="showOrgUnitWindow('orgUnitWindow',this)"></i></a>
    <orgunitwindow option="orgUnitWindowOption"> </orgunitwindow>
</div>



<script>


       /* function orgUnitGrid($scope){
            $scope.orgUnits = [{"id" : "1","name" : "北京"},{"id" : "1","name" : "北京"}];
            $(document).on('mousedown', function (e) {
                // Clicked outside the datetimepicker, hide it
                if ($(e.target).closest('.orgUnitWindow').length === 0) {
                    $('#orgUnitWindow').hide();
                }
            });
        }

    function orgUnitShow(element){
            var eOff = $(element).offset();
        var left = eOff.left;
        $('#orgUnitWindow').top =  eOff.top;
        if(left + $('#orgUnitWindow').outerWidth()> document.body.clientWidth){
            left = document.body.clientWidth-$('#orgUnitWindow').outerWidth();
        }
        $('#orgUnitWindow').css({
            top:top,
            left:left
        });
        $('#orgUnitWindow').show();
    }*/

    var appModule = angular.module("app",["orgUnitWindowModule"]);
    appModule.controller("appctr",function($scope){

        $scope.orgUnitWindowOption = {"id":'orgUnitWindow',"callBack":"setIds","filedIdValue":$scope.ids,"singleSelected":true};

        $scope.setIds = function(rows){

                if(rows){
                    var ids = new Array();
                    var names = new Array();
                    for(var i = 0;i<rows.length;i++){
                        names.push(rows[i].name);
                        ids.push(rows[i].id);
                    }
                    $scope.names = names.join(',');
                    $scope.ids = ids.join(',');
                }else{
                    $scope.names = null;
                    $scope.ids = null;
                }

        }
    })

</script>
</body>
</html>